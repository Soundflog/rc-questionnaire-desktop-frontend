<tui-island>
  <ng-container *ngIf="rehabProgram$ | async as rehabProgram; else loading">
    <tui-island class="tui-space_bottom-5">
      <ng-container *ngIf="rehabProgram.programFormResponses[0] as prForm0">
        <h3 class="tui-island__title">{{ prForm0.typeName }} </h3>
        <p class="tui-island__paragraph tui-space_bottom-3">
          {{ prForm0.name }}
        </p>
        <p class="tui-island__paragraph tui-space_bottom-3">
          {{ prForm0.description }}
        </p>
        <button
          class="tui-space_bottom-3"
          size="m"
          appearance="primary"
          tuiButton
          type="button"
          [disabled]="visiblePrimaryAnketa"
          (click)="goToNextPage(prForm0.id)"
        >
          Перейти
        </button>
        <label class="tui-space_bottom-3"
               tuiLabel="Дата окончания"
        >
          {{ stringFyDate(prForm0.finishedAt) }}
        </label>
      </ng-container>
    </tui-island>

    <tui-accordion class="container tui-space_bottom-5">
      <tui-accordion-item>

        <h3 class="font-bold">Мероприятия медицинской реабилитации</h3>
        <tui-badge
          status="success"
          value="Success"
          class="tui-space_right-2 tui-space_bottom-2"
        ></tui-badge>

        <ng-template tuiAccordionItemContent>
          <ng-container *ngFor="let m of rehabProgram.moduleShortResponses">
            <tui-island class="tui-space_bottom-2">
              <div class="module-content">
                <span class="module-text">{{ m.name }}</span>
                <button
                  size="m"
                  appearance="primary"
                  tuiButton
                  type="button"
                  (click)="sendModuleId(m.id)"
                  routerLink="/rehabilitation/program/module/{{m.id}}"
                >
                  Перейти
                </button>
              </div>
            </tui-island>
          </ng-container>
        </ng-template>
      </tui-accordion-item>
    </tui-accordion>

    <tui-island class="tui-space_bottom-5">
      <ng-container *ngIf="rehabProgram.programFormResponses[1] as prForm1">
        <h3 class="tui-island__title">{{ prForm1.typeName }} </h3>
        <p class="tui-island__paragraph tui-space_bottom-3">
          {{ prForm1.name }}
        </p>
        <p class="tui-island__paragraph tui-space_bottom-3">
          {{ prForm1.description }}
        </p>
        <button
          class="tui-space_bottom-3"
          size="m"
          appearance="primary"
          tuiButton
          type="button"
          [disabled]="visiblePrimaryAnketa"
          (click)="goToNextPage(prForm1.id)"
        >
          Перейти
        </button>
        <label class="tui-space_bottom-3"
               tuiLabel="Дата окончания"
        >
          {{ stringFyDate(prForm1.finishedAt) }}
        </label>
      </ng-container>
    </tui-island>
    <label class="tui-space_bottom-3"
           tuiLabel="Дата начала программы"
    >
      {{ stringFyDate(rehabProgram.startDate) }}
    </label>
    <label class="tui-space_bottom-3"
           tuiLabel="Дата окончания программы"
    >
      {{ stringFyDate(rehabProgram.endDate) }}
    </label>
  </ng-container>
  <ng-template #loading>
    <app-loading/>
  </ng-template>
</tui-island>
